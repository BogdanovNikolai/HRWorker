# Changelog

## [2024-01-17] - Множественные текстовые поля и улучшенное логирование

### Добавлено
- **Множественные текстовые поля** - возможность добавлять несколько полей поиска с индивидуальными настройками логики и области поиска
- **Динамическое управление полями** - кнопки добавления/удаления полей с JavaScript
- **Подробное логирование параметров поиска** - все параметры поиска резюме теперь логируются с группировкой по категориям
- **Логирование HTTP запросов** - полные URL и параметры запросов к HH API
- **Статистика ответов API** - количество найденных резюме, страниц, элементов на странице
- **Отслеживание кэширования** - логирование операций с кэшем Redis
- **Детали резюме** - логирование запросов и ответов при получении полных данных резюме
- **Итоговая статистика** - общее количество загруженных резюме, обработанных страниц
- **Тестовые скрипты** - `test_logging.py` и `test_multiple_text_fields.py` для проверки функциональности
- **Документация** - `docs/logging.md` и `docs/multiple_text_fields.md` с подробным описанием новых возможностей

### Изменено
- **templates/search.html** - полностью переработана секция текстовых полей с поддержкой множественных полей
- **app.py** - обновлена обработка параметров для поддержки множественных текстовых полей
- **data_manager/search_engine.py** - добавлено логирование параметров поиска
- **api/hh/main.py** - добавлено логирование HTTP запросов, ответов и статистики

### Файлы логов
- **Путь**: `logs/app.log`
- **Формат**: Структурированные логи с временными метками
- **Уровни**: INFO, DEBUG, WARNING, ERROR

### Примеры множественных полей
```
Поле 1: "python" (логика: all, поле: skills)
Поле 2: "middle разработчик" (логика: phrase, поле: title)
Поле 3: "django" (логика: any, поле: experience)

Объединенный запрос: "python middle разработчик django"
```

### Примеры логов
```
=== ПАРАМЕТРЫ ПОИСКА ===
Ключевые слова: python middle разработчик django
Регион: ['2019']
Зарплата от: 100000
Зарплата до: 300000
=== КОНЕЦ ПАРАМЕТРОВ ===

Выполняется GET-запрос к API HeadHunter: https://api.hh.ru/resumes?...
Параметры запроса: {'text': 'python middle разработчик django', 'salary_from': 100000, ...}

Статистика ответа HH API:
  - Найдено всего: 1542
  - Страниц: 78
  - Получено резюме: 20

=== ИТОГИ ПОИСКА ===
Всего загружено резюме: 45
Обработано страниц: 3
=== КОНЕЦ ПОИСКА ===
```

### Совместимость
- ✅ Обратная совместимость сохранена
- ✅ Все существующие функции работают без изменений
- ✅ Логирование не влияет на производительность

### Тестирование
```bash
# Активировать виртуальное окружение
.venv\Scripts\activate

# Запустить тест множественных полей
python test_multiple_text_fields.py

# Запустить тест логирования
python test_logging.py

# Просмотреть логи
Get-Content logs\app.log -Tail 50
```

---

## [2024-01-16] - Расширенная форма поиска резюме

### Добавлено
- **Полная поддержка параметров HeadHunter API** - все доступные фильтры поиска
- **Расширенная форма поиска** - новые поля для текстового поиска, зарплаты, опыта, образования
- **Параметры демографии** - возраст, пол, готовность к переезду
- **Фильтры дат** - период обновления резюме, диапазон дат
- **Сортировка и метки** - различные варианты сортировки и специальные метки
- **Валидация параметров** - проверка корректности входных данных
- **Ограничения пагинации** - защита от превышения лимитов API

### Изменено
- **templates/search.html** - полностью переработанная форма поиска
- **app.py** - обновлен маршрут `/search` для обработки новых параметров
- **data_manager/main.py** - расширен метод `search_resumes`
- **data_manager/search_engine.py** - добавлена поддержка всех параметров HH API
- **api/hh/main.py** - реализована передача всех параметров в HH API

### Новые параметры поиска
- **Текстовый поиск**: логика (all/any), поля (name/skills/description), период опыта
- **Зарплата**: диапазон, валюта
- **Фильтры**: возраст, опыт, образование, занятость, график, пол, статус поиска
- **Даты**: период обновления, диапазон дат
- **Переезд**: готовность к переезду
- **Сортировка**: по релевантности, дате, зарплате
- **Метки**: только с фото, только с зарплатой, готов к переезду

### Документация
- **docs/extended_search.md** - подробное описание новых возможностей
- **test_extended_search.py** - тесты для проверки функциональности

### Совместимость
- ✅ Обратная совместимость сохранена
- ✅ Старые формы поиска продолжают работать
- ✅ Новые параметры опциональны

### Тестирование
```bash
# Запустить приложение
python app.py

# Открыть в браузере
http://localhost:5000/search

# Запустить тесты
python test_extended_search.py
``` 